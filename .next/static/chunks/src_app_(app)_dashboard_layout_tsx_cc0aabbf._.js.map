{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/dashboard/layout.tsx"],"sourcesContent":["\n'use client';\n\nimport * as React from 'react';\nimport Link from 'next/link';\nimport { usePathname, useRouter } from 'next/navigation';\nimport {\n  FileText,\n  LayoutDashboard,\n  LogOut,\n  ShieldAlert,\n  ChevronDown,\n  Library,\n  Users,\n  Database,\n  Shield,\n  Settings,\n  User,\n  Check,\n} from 'lucide-react';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarHeader,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuItem,\n  SidebarMenuButton,\n  SidebarTrigger,\n  SidebarFooter,\n  SidebarSeparator,\n  SidebarGroup,\n  SidebarGroupLabel,\n} from '@/components/ui/sidebar';\nimport { isFirebaseEnabled, auth, db } from '@/lib/firebase';\nimport { signOut } from 'firebase/auth';\nimport { useAuth } from '@/context/auth-context';\nimport { useTestsStore, useCandidatesStore, useSubmissionsStore } from '@/lib/store';\nimport { collection, onSnapshot, query, getDocs } from 'firebase/firestore';\nimport type { Test, Candidate, Submission, Question } from '@/lib/types';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function DashboardLayout({ children }: { children: React.ReactNode }) {\n  const pathname = usePathname();\n  const router = useRouter();\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const isActive = (path: string) => pathname.startsWith(path);\n\n  const { setTests } = useTestsStore();\n  const { setCandidates } = useCandidatesStore();\n  const { setSubmissions } = useSubmissionsStore();\n\n  React.useEffect(() => {\n    if (!isFirebaseEnabled) {\n      return;\n    }\n\n    const unsubscribes: (() => void)[] = [];\n\n    const testsQuery = query(collection(db, 'tests'));\n    const testsUnsub = onSnapshot(testsQuery, async (snapshot) => {\n        const testsData = await Promise.all(snapshot.docs.map(async (doc) => {\n            const test = { id: doc.id, ...doc.data() } as Test;\n            const questionsQuery = query(collection(db, 'tests', doc.id, 'questions'));\n            const questionsSnapshot = await getDocs(questionsQuery);\n            test.questions = questionsSnapshot.docs.map(qDoc => ({ id: qDoc.id, ...qDoc.data() } as Question));\n            return test;\n        }));\n        setTests(testsData);\n    }, (error) => {\n        console.error(\"Error fetching tests:\", error);\n        toast({ variant: 'destructive', title: 'Error loading tests', description: error.message });\n    });\n    unsubscribes.push(testsUnsub);\n\n    const candidatesQuery = query(collection(db, 'candidates'));\n    const candidatesUnsub = onSnapshot(candidatesQuery, (snapshot) => {\n        const candidatesData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Candidate));\n        setCandidates(candidatesData);\n    }, (error) => {\n        console.error(\"Error fetching candidates:\", error);\n        toast({ variant: 'destructive', title: 'Error loading candidates', description: error.message });\n    });\n    unsubscribes.push(candidatesUnsub);\n\n    const submissionsQuery = query(collection(db, 'submissions'));\n    const submissionsUnsub = onSnapshot(submissionsQuery, (snapshot) => {\n        const subsData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Submission));\n        setSubmissions(subsData);\n    }, (error) => {\n        console.error(\"Error fetching submissions:\", error);\n        toast({ variant: 'destructive', title: 'Error loading submissions', description: error.message });\n    });\n    unsubscribes.push(submissionsUnsub);\n\n    return () => unsubscribes.forEach(unsub => unsub());\n\n  }, [setTests, setCandidates, setSubmissions, toast]);\n\n  const handleLogout = async () => {\n    if (isFirebaseEnabled) {\n      await signOut(auth);\n    }\n    router.push('/');\n  };\n  \n  const displayName = user?.displayName || user?.email || 'Admin';\n  const displayEmail = user?.email || 'No email associated';\n\n  return (\n    <>\n      <Sidebar>\n        <SidebarHeader className=\"p-4\">\n           <div className=\"flex items-center gap-2 font-bold text-xl\">\n             <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 overflow-hidden\">\n                <Shield className=\"h-5 w-5 text-primary\" />\n            </div>\n            <span>ProctorExam Lite</span>\n          </div>\n        </SidebarHeader>\n        <SidebarContent>\n           <SidebarMenu>\n            <SidebarMenuItem>\n              <SidebarMenuButton asChild isActive={pathname === '/dashboard'}>\n                <Link href=\"/dashboard\">\n                  <LayoutDashboard />\n                  Dashboard\n                </Link>\n              </SidebarMenuButton>\n            </SidebarMenuItem>\n          </SidebarMenu>\n          <SidebarGroup>\n            <SidebarGroupLabel>Content</SidebarGroupLabel>\n            <SidebarMenu>\n              <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={isActive('/dashboard/tests')}>\n                  <Link href=\"/dashboard/tests\">\n                    <FileText />\n                    Tests\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n              <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={isActive('/dashboard/questions')}>\n                  <Link href=\"/dashboard/questions\">\n                    <Library />\n                    Question Bank\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n            </SidebarMenu>\n          </SidebarGroup>\n           <SidebarGroup>\n            <SidebarGroupLabel>Administration</SidebarGroupLabel>\n            <SidebarMenu>\n               <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={isActive('/dashboard/candidates')}>\n                  <Link href=\"/dashboard/candidates\">\n                    <Users />\n                    Candidates\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n              <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={isActive('/dashboard/analysis')}>\n                  <Link href=\"/dashboard/analysis\">\n                    <ShieldAlert />\n                    Analysis\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n              <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={isActive('/dashboard/results')}>\n                  <Link href=\"/dashboard/results\">\n                    <Check />\n                    Results\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n               <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={isActive('/dashboard/settings')}>\n                  <Link href=\"/dashboard/settings\">\n                    <Settings />\n                    Settings\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n            </SidebarMenu>\n          </SidebarGroup>\n        </SidebarContent>\n        <SidebarFooter>\n            <SidebarSeparator />\n            <SidebarMenu>\n                 <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={isActive('/dashboard/seed-database')}>\n                        <Link href=\"/dashboard/seed-database\">\n                        <Database />\n                        Seed Database\n                        </Link>\n                    </SidebarMenuButton>\n                </SidebarMenuItem>\n            </SidebarMenu>\n        </SidebarFooter>\n      </Sidebar>\n      <SidebarInset>\n        <header className=\"flex h-16 items-center justify-between border-b bg-background/50 px-4 backdrop-blur-sm md:justify-end\">\n          <SidebarTrigger className=\"md:hidden\" />\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <button className=\"flex items-center gap-2 rounded-full p-1 pr-3 transition-colors hover:bg-muted\">\n                <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 text-primary\">\n                  {user ? <User className=\"h-5 w-5\" /> : <Shield className=\"h-5 w-5\" />}\n                </div>\n                <div className=\"hidden text-left md:block\">\n                  <p className=\"text-sm font-medium\">{displayName}</p>\n                  <p className=\"text-xs text-muted-foreground\">{displayEmail}</p>\n                </div>\n                <ChevronDown className=\"ml-auto h-4 w-4 text-muted-foreground\" />\n              </button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-56\">\n              <DropdownMenuLabel>My Account</DropdownMenuLabel>\n              <DropdownMenuSeparator />\n               <DropdownMenuItem onClick={() => router.push('/dashboard/settings')}>\n                <Settings className=\"mr-2 h-4 w-4\" />\n                <span>Settings</span>\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={handleLogout}>\n                <LogOut className=\"mr-2 h-4 w-4\" />\n                <span>Log out</span>\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </header>\n        <main className=\"flex-1 overflow-y-auto overflow-x-hidden\">\n          <div className=\"p-4 md:p-6 lg:p-8\">\n            {children}\n          </div>\n        </main>\n      </SidebarInset>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAQA;AAcA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAEA;;;AA/CA;;;;;;;;;;;;;AAiDe,SAAS,gBAAgB,EAAE,QAAQ,EAAiC;;IACjF,MAAM,WAAW,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,qIAAA,CAAA,UAAO,AAAD;IACvB,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,WAAW,CAAC,OAAiB,SAAS,UAAU,CAAC;IAEvD,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,sHAAA,CAAA,gBAAa,AAAD;IACjC,MAAM,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,sHAAA,CAAA,qBAAkB,AAAD;IAC3C,MAAM,EAAE,cAAc,EAAE,GAAG,CAAA,GAAA,sHAAA,CAAA,sBAAmB,AAAD;IAE7C,CAAA,GAAA,6JAAA,CAAA,YAAe,AAAD;qCAAE;YACd,IAAI,CAAC,yHAAA,CAAA,oBAAiB,EAAE;gBACtB;YACF;YAEA,MAAM,eAA+B,EAAE;YAEvC,MAAM,aAAa,CAAA,GAAA,sKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE,yHAAA,CAAA,KAAE,EAAE;YACxC,MAAM,aAAa,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE;wDAAY,OAAO;oBAC7C,MAAM,YAAY,MAAM,QAAQ,GAAG,CAAC,SAAS,IAAI,CAAC,GAAG;gEAAC,OAAO;4BACzD,MAAM,OAAO;gCAAE,IAAI,IAAI,EAAE;gCAAE,GAAG,IAAI,IAAI,EAAE;4BAAC;4BACzC,MAAM,iBAAiB,CAAA,GAAA,sKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE,yHAAA,CAAA,KAAE,EAAE,SAAS,IAAI,EAAE,EAAE;4BAC7D,MAAM,oBAAoB,MAAM,CAAA,GAAA,sKAAA,CAAA,UAAO,AAAD,EAAE;4BACxC,KAAK,SAAS,GAAG,kBAAkB,IAAI,CAAC,GAAG;wEAAC,CAAA,OAAQ,CAAC;wCAAE,IAAI,KAAK,EAAE;wCAAE,GAAG,KAAK,IAAI,EAAE;oCAAC,CAAa;;4BAChG,OAAO;wBACX;;oBACA,SAAS;gBACb;;wDAAG,CAAC;oBACA,QAAQ,KAAK,CAAC,yBAAyB;oBACvC,MAAM;wBAAE,SAAS;wBAAe,OAAO;wBAAuB,aAAa,MAAM,OAAO;oBAAC;gBAC7F;;YACA,aAAa,IAAI,CAAC;YAElB,MAAM,kBAAkB,CAAA,GAAA,sKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE,yHAAA,CAAA,KAAE,EAAE;YAC7C,MAAM,kBAAkB,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE;6DAAiB,CAAC;oBACjD,MAAM,iBAAiB,SAAS,IAAI,CAAC,GAAG;oFAAC,CAAA,MAAO,CAAC;gCAAE,IAAI,IAAI,EAAE;gCAAE,GAAG,IAAI,IAAI,EAAE;4BAAC,CAAc;;oBAC3F,cAAc;gBAClB;;6DAAG,CAAC;oBACA,QAAQ,KAAK,CAAC,8BAA8B;oBAC5C,MAAM;wBAAE,SAAS;wBAAe,OAAO;wBAA4B,aAAa,MAAM,OAAO;oBAAC;gBAClG;;YACA,aAAa,IAAI,CAAC;YAElB,MAAM,mBAAmB,CAAA,GAAA,sKAAA,CAAA,QAAK,AAAD,EAAE,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE,yHAAA,CAAA,KAAE,EAAE;YAC9C,MAAM,mBAAmB,CAAA,GAAA,sKAAA,CAAA,aAAU,AAAD,EAAE;8DAAkB,CAAC;oBACnD,MAAM,WAAW,SAAS,IAAI,CAAC,GAAG;+EAAC,CAAA,MAAO,CAAC;gCAAE,IAAI,IAAI,EAAE;gCAAE,GAAG,IAAI,IAAI,EAAE;4BAAC,CAAe;;oBACtF,eAAe;gBACnB;;8DAAG,CAAC;oBACA,QAAQ,KAAK,CAAC,+BAA+B;oBAC7C,MAAM;wBAAE,SAAS;wBAAe,OAAO;wBAA6B,aAAa,MAAM,OAAO;oBAAC;gBACnG;;YACA,aAAa,IAAI,CAAC;YAElB;6CAAO,IAAM,aAAa,OAAO;qDAAC,CAAA,QAAS;;;QAE7C;oCAAG;QAAC;QAAU;QAAe;QAAgB;KAAM;IAEnD,MAAM,eAAe;QACnB,IAAI,yHAAA,CAAA,oBAAiB,EAAE;YACrB,MAAM,CAAA,GAAA,yOAAA,CAAA,UAAO,AAAD,EAAE,yHAAA,CAAA,OAAI;QACpB;QACA,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,cAAc,MAAM,eAAe,MAAM,SAAS;IACxD,MAAM,eAAe,MAAM,SAAS;IAEpC,qBACE;;0BACE,6LAAC,sIAAA,CAAA,UAAO;;kCACN,6LAAC,sIAAA,CAAA,gBAAa;wBAAC,WAAU;kCACtB,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;8CACZ,cAAA,6LAAC,yMAAA,CAAA,SAAM;wCAAC,WAAU;;;;;;;;;;;8CAEtB,6LAAC;8CAAK;;;;;;;;;;;;;;;;;kCAGV,6LAAC,sIAAA,CAAA,iBAAc;;0CACZ,6LAAC,sIAAA,CAAA,cAAW;0CACX,cAAA,6LAAC,sIAAA,CAAA,kBAAe;8CACd,cAAA,6LAAC,sIAAA,CAAA,oBAAiB;wCAAC,OAAO;wCAAC,UAAU,aAAa;kDAChD,cAAA,6LAAC,+JAAA,CAAA,UAAI;4CAAC,MAAK;;8DACT,6LAAC,+NAAA,CAAA,kBAAe;;;;;gDAAG;;;;;;;;;;;;;;;;;;;;;;0CAM3B,6LAAC,sIAAA,CAAA,eAAY;;kDACX,6LAAC,sIAAA,CAAA,oBAAiB;kDAAC;;;;;;kDACnB,6LAAC,sIAAA,CAAA,cAAW;;0DACV,6LAAC,sIAAA,CAAA,kBAAe;0DACd,cAAA,6LAAC,sIAAA,CAAA,oBAAiB;oDAAC,OAAO;oDAAC,UAAU,SAAS;8DAC5C,cAAA,6LAAC,+JAAA,CAAA,UAAI;wDAAC,MAAK;;0EACT,6LAAC,iNAAA,CAAA,WAAQ;;;;;4DAAG;;;;;;;;;;;;;;;;;0DAKlB,6LAAC,sIAAA,CAAA,kBAAe;0DACd,cAAA,6LAAC,sIAAA,CAAA,oBAAiB;oDAAC,OAAO;oDAAC,UAAU,SAAS;8DAC5C,cAAA,6LAAC,+JAAA,CAAA,UAAI;wDAAC,MAAK;;0EACT,6LAAC,2MAAA,CAAA,UAAO;;;;;4DAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CAOpB,6LAAC,sIAAA,CAAA,eAAY;;kDACZ,6LAAC,sIAAA,CAAA,oBAAiB;kDAAC;;;;;;kDACnB,6LAAC,sIAAA,CAAA,cAAW;;0DACT,6LAAC,sIAAA,CAAA,kBAAe;0DACf,cAAA,6LAAC,sIAAA,CAAA,oBAAiB;oDAAC,OAAO;oDAAC,UAAU,SAAS;8DAC5C,cAAA,6LAAC,+JAAA,CAAA,UAAI;wDAAC,MAAK;;0EACT,6LAAC,uMAAA,CAAA,QAAK;;;;;4DAAG;;;;;;;;;;;;;;;;;0DAKf,6LAAC,sIAAA,CAAA,kBAAe;0DACd,cAAA,6LAAC,sIAAA,CAAA,oBAAiB;oDAAC,OAAO;oDAAC,UAAU,SAAS;8DAC5C,cAAA,6LAAC,+JAAA,CAAA,UAAI;wDAAC,MAAK;;0EACT,6LAAC,uNAAA,CAAA,cAAW;;;;;4DAAG;;;;;;;;;;;;;;;;;0DAKrB,6LAAC,sIAAA,CAAA,kBAAe;0DACd,cAAA,6LAAC,sIAAA,CAAA,oBAAiB;oDAAC,OAAO;oDAAC,UAAU,SAAS;8DAC5C,cAAA,6LAAC,+JAAA,CAAA,UAAI;wDAAC,MAAK;;0EACT,6LAAC,uMAAA,CAAA,QAAK;;;;;4DAAG;;;;;;;;;;;;;;;;;0DAKd,6LAAC,sIAAA,CAAA,kBAAe;0DACf,cAAA,6LAAC,sIAAA,CAAA,oBAAiB;oDAAC,OAAO;oDAAC,UAAU,SAAS;8DAC5C,cAAA,6LAAC,+JAAA,CAAA,UAAI;wDAAC,MAAK;;0EACT,6LAAC,6MAAA,CAAA,WAAQ;;;;;4DAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAQxB,6LAAC,sIAAA,CAAA,gBAAa;;0CACV,6LAAC,sIAAA,CAAA,mBAAgB;;;;;0CACjB,6LAAC,sIAAA,CAAA,cAAW;0CACP,cAAA,6LAAC,sIAAA,CAAA,kBAAe;8CACb,cAAA,6LAAC,sIAAA,CAAA,oBAAiB;wCAAC,OAAO;wCAAC,UAAU,SAAS;kDAC1C,cAAA,6LAAC,+JAAA,CAAA,UAAI;4CAAC,MAAK;;8DACX,6LAAC,6MAAA,CAAA,WAAQ;;;;;gDAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQ9B,6LAAC,sIAAA,CAAA,eAAY;;kCACX,6LAAC;wBAAO,WAAU;;0CAChB,6LAAC,sIAAA,CAAA,iBAAc;gCAAC,WAAU;;;;;;0CAC1B,6LAAC,+IAAA,CAAA,eAAY;;kDACX,6LAAC,+IAAA,CAAA,sBAAmB;wCAAC,OAAO;kDAC1B,cAAA,6LAAC;4CAAO,WAAU;;8DAChB,6LAAC;oDAAI,WAAU;8DACZ,qBAAO,6LAAC,qMAAA,CAAA,OAAI;wDAAC,WAAU;;;;;6EAAe,6LAAC,yMAAA,CAAA,SAAM;wDAAC,WAAU;;;;;;;;;;;8DAE3D,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAE,WAAU;sEAAuB;;;;;;sEACpC,6LAAC;4DAAE,WAAU;sEAAiC;;;;;;;;;;;;8DAEhD,6LAAC,uNAAA,CAAA,cAAW;oDAAC,WAAU;;;;;;;;;;;;;;;;;kDAG3B,6LAAC,+IAAA,CAAA,sBAAmB;wCAAC,OAAM;wCAAM,WAAU;;0DACzC,6LAAC,+IAAA,CAAA,oBAAiB;0DAAC;;;;;;0DACnB,6LAAC,+IAAA,CAAA,wBAAqB;;;;;0DACrB,6LAAC,+IAAA,CAAA,mBAAgB;gDAAC,SAAS,IAAM,OAAO,IAAI,CAAC;;kEAC5C,6LAAC,6MAAA,CAAA,WAAQ;wDAAC,WAAU;;;;;;kEACpB,6LAAC;kEAAK;;;;;;;;;;;;0DAER,6LAAC,+IAAA,CAAA,mBAAgB;gDAAC,SAAS;;kEACzB,6LAAC,6MAAA,CAAA,SAAM;wDAAC,WAAU;;;;;;kEAClB,6LAAC;kEAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAKd,6LAAC;wBAAK,WAAU;kCACd,cAAA,6LAAC;4BAAI,WAAU;sCACZ;;;;;;;;;;;;;;;;;;;AAMb;GAzMwB;;QACL,qIAAA,CAAA,cAAW;QACb,qIAAA,CAAA,YAAS;QACP,qIAAA,CAAA,UAAO;QACN,+HAAA,CAAA,WAAQ;QAGL,sHAAA,CAAA,gBAAa;QACR,sHAAA,CAAA,qBAAkB;QACjB,sHAAA,CAAA,sBAAmB;;;KATxB","debugId":null}}]
}