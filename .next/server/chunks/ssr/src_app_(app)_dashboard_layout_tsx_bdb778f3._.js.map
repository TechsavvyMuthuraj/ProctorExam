{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/dashboard/layout.tsx"],"sourcesContent":["\n'use client';\n\nimport * as React from 'react';\nimport Link from 'next/link';\nimport { usePathname, useRouter } from 'next/navigation';\nimport {\n  FileText,\n  LayoutDashboard,\n  LogOut,\n  ShieldAlert,\n  ChevronDown,\n  Library,\n  Users,\n  Database,\n  Shield,\n  Settings,\n  User,\n  Check,\n} from 'lucide-react';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarHeader,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuItem,\n  SidebarMenuButton,\n  SidebarTrigger,\n  SidebarFooter,\n  SidebarSeparator,\n  SidebarGroup,\n  SidebarGroupLabel,\n} from '@/components/ui/sidebar';\nimport { isFirebaseEnabled, auth, db } from '@/lib/firebase';\nimport { signOut } from 'firebase/auth';\nimport { useAuth } from '@/context/auth-context';\nimport { useTestsStore, useCandidatesStore, useSubmissionsStore } from '@/lib/store';\nimport { collection, onSnapshot, query, getDocs } from 'firebase/firestore';\nimport type { Test, Candidate, Submission, Question } from '@/lib/types';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function DashboardLayout({ children }: { children: React.ReactNode }) {\n  const pathname = usePathname();\n  const router = useRouter();\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const isActive = (path: string) => pathname.startsWith(path);\n\n  const { setTests } = useTestsStore();\n  const { setCandidates } = useCandidatesStore();\n  const { setSubmissions } = useSubmissionsStore();\n\n  React.useEffect(() => {\n    if (!isFirebaseEnabled) {\n      return;\n    }\n\n    const unsubscribes: (() => void)[] = [];\n\n    const testsQuery = query(collection(db, 'tests'));\n    const testsUnsub = onSnapshot(testsQuery, async (snapshot) => {\n        const testsData = await Promise.all(snapshot.docs.map(async (doc) => {\n            const test = { id: doc.id, ...doc.data() } as Test;\n            const questionsQuery = query(collection(db, 'tests', doc.id, 'questions'));\n            const questionsSnapshot = await getDocs(questionsQuery);\n            test.questions = questionsSnapshot.docs.map(qDoc => ({ id: qDoc.id, ...qDoc.data() } as Question));\n            return test;\n        }));\n        setTests(testsData);\n    }, (error) => {\n        console.error(\"Error fetching tests:\", error);\n        toast({ variant: 'destructive', title: 'Error loading tests', description: error.message });\n    });\n    unsubscribes.push(testsUnsub);\n\n    const candidatesQuery = query(collection(db, 'candidates'));\n    const candidatesUnsub = onSnapshot(candidatesQuery, (snapshot) => {\n        const candidatesData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Candidate));\n        setCandidates(candidatesData);\n    }, (error) => {\n        console.error(\"Error fetching candidates:\", error);\n        toast({ variant: 'destructive', title: 'Error loading candidates', description: error.message });\n    });\n    unsubscribes.push(candidatesUnsub);\n\n    const submissionsQuery = query(collection(db, 'submissions'));\n    const submissionsUnsub = onSnapshot(submissionsQuery, (snapshot) => {\n        const subsData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Submission));\n        setSubmissions(subsData);\n    }, (error) => {\n        console.error(\"Error fetching submissions:\", error);\n        toast({ variant: 'destructive', title: 'Error loading submissions', description: error.message });\n    });\n    unsubscribes.push(submissionsUnsub);\n\n    return () => unsubscribes.forEach(unsub => unsub());\n\n  }, [setTests, setCandidates, setSubmissions, toast]);\n\n  const handleLogout = async () => {\n    if (isFirebaseEnabled) {\n      await signOut(auth);\n    }\n    router.push('/');\n  };\n  \n  const displayName = user?.displayName || user?.email || 'Admin';\n  const displayEmail = user?.email || 'No email associated';\n\n  return (\n    <>\n      <Sidebar>\n        <SidebarHeader className=\"p-4\">\n           <div className=\"flex items-center gap-2 font-bold text-xl\">\n             <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 overflow-hidden\">\n                <Shield className=\"h-5 w-5 text-primary\" />\n            </div>\n            <span>ProctorExam Lite</span>\n          </div>\n        </SidebarHeader>\n        <SidebarContent>\n           <SidebarMenu>\n            <SidebarMenuItem>\n              <SidebarMenuButton asChild isActive={pathname === '/dashboard'}>\n                <Link href=\"/dashboard\">\n                  <LayoutDashboard />\n                  Dashboard\n                </Link>\n              </SidebarMenuButton>\n            </SidebarMenuItem>\n          </SidebarMenu>\n          <SidebarGroup>\n            <SidebarGroupLabel>Content</SidebarGroupLabel>\n            <SidebarMenu>\n              <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={isActive('/dashboard/tests')}>\n                  <Link href=\"/dashboard/tests\">\n                    <FileText />\n                    Tests\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n              <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={isActive('/dashboard/questions')}>\n                  <Link href=\"/dashboard/questions\">\n                    <Library />\n                    Question Bank\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n            </SidebarMenu>\n          </SidebarGroup>\n           <SidebarGroup>\n            <SidebarGroupLabel>Administration</SidebarGroupLabel>\n            <SidebarMenu>\n               <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={isActive('/dashboard/candidates')}>\n                  <Link href=\"/dashboard/candidates\">\n                    <Users />\n                    Candidates\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n              <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={isActive('/dashboard/analysis')}>\n                  <Link href=\"/dashboard/analysis\">\n                    <ShieldAlert />\n                    Analysis\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n              <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={isActive('/dashboard/results')}>\n                  <Link href=\"/dashboard/results\">\n                    <Check />\n                    Results\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n               <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={isActive('/dashboard/settings')}>\n                  <Link href=\"/dashboard/settings\">\n                    <Settings />\n                    Settings\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n            </SidebarMenu>\n          </SidebarGroup>\n        </SidebarContent>\n        <SidebarFooter>\n            <SidebarSeparator />\n            <SidebarMenu>\n                 <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={isActive('/dashboard/seed-database')}>\n                        <Link href=\"/dashboard/seed-database\">\n                        <Database />\n                        Seed Database\n                        </Link>\n                    </SidebarMenuButton>\n                </SidebarMenuItem>\n            </SidebarMenu>\n        </SidebarFooter>\n      </Sidebar>\n      <SidebarInset>\n        <header className=\"flex h-16 items-center justify-between border-b bg-background/50 px-4 backdrop-blur-sm md:justify-end\">\n          <SidebarTrigger className=\"md:hidden\" />\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <button className=\"flex items-center gap-2 rounded-full p-1 pr-3 transition-colors hover:bg-muted\">\n                <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 text-primary\">\n                  {user ? <User className=\"h-5 w-5\" /> : <Shield className=\"h-5 w-5\" />}\n                </div>\n                <div className=\"hidden text-left md:block\">\n                  <p className=\"text-sm font-medium\">{displayName}</p>\n                  <p className=\"text-xs text-muted-foreground\">{displayEmail}</p>\n                </div>\n                <ChevronDown className=\"ml-auto h-4 w-4 text-muted-foreground\" />\n              </button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-56\">\n              <DropdownMenuLabel>My Account</DropdownMenuLabel>\n              <DropdownMenuSeparator />\n               <DropdownMenuItem onClick={() => router.push('/dashboard/settings')}>\n                <Settings className=\"mr-2 h-4 w-4\" />\n                <span>Settings</span>\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={handleLogout}>\n                <LogOut className=\"mr-2 h-4 w-4\" />\n                <span>Log out</span>\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </header>\n        <main className=\"flex-1 overflow-y-auto overflow-x-hidden\">\n          <div className=\"p-4 md:p-6 lg:p-8\">\n            {children}\n          </div>\n        </main>\n      </SidebarInset>\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}